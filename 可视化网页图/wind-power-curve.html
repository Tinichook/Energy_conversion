<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é£æœºåŠŸç‡æ›²çº¿ä¸Cpæ›²çº¿</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: #f5f5f5;
            padding: 20px;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 30px;
        }
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 20px;
        }
        .controls {
            margin: 20px 0;
            padding: 20px;
            background: #e9ecef;
            border-radius: 8px;
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }
        .control-group {
            display: flex;
            flex-direction: column;
        }
        .control-group label {
            font-weight: bold;
            margin-bottom: 5px;
            color: #555;
        }
        .control-group select {
            padding: 8px 12px;
            border-radius: 5px;
            border: 1px solid #ccc;
            font-size: 14px;
        }
        button {
            padding: 10px 20px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            margin-top: 20px;
        }
        button:hover {
            background: #0056b3;
        }
        .charts-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        .chart-box {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #ddd;
        }
        .chart-box h3 {
            text-align: center;
            color: #007bff;
            margin-bottom: 15px;
        }
        canvas {
            display: block;
            margin: 0 auto;
            border: 1px solid #ddd;
            border-radius: 5px;
            background: white;
        }
        .info-panel {
            margin-top: 20px;
            padding: 20px;
            background: #d1ecf1;
            border-radius: 8px;
        }
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
        }
        .info-item {
            padding: 8px;
            background: white;
            border-radius: 5px;
            font-size: 14px;
        }
        .info-item strong {
            color: #d63384;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸŒ¬ï¸ é£æœºåŠŸç‡æ›²çº¿ä¸Cpæ›²çº¿åˆ†æ</h1>
        
        <div class="controls">
            <div class="control-group">
                <label>é€‰æ‹©é£æœºå‹å·ï¼š</label>
                <select id="turbineSelect">
                    <option value="WT-3">SWT-3kW</option>
                    <option value="WT-10">SWT-10kW</option>
                    <option value="WT-50">MWT-50kW</option>
                    <option value="WT-1500">GW87/1500</option>
                    <option value="WT-2500" selected>GW121/2500</option>
                    <option value="WT-3000">MySE3.0-135</option>
                    <option value="WT-3600">EN-141/3.6</option>
                </select>
            </div>
            <button onclick="updateCharts()">ğŸ”„ æ›´æ–°å›¾è¡¨</button>
        </div>
        
        <div class="charts-container">
            <div class="chart-box">
                <h3>ğŸ“ˆ é£æœºé™æ€åŠŸç‡æ›²çº¿ï¼ˆP-Vï¼‰</h3>
                <canvas id="powerChart" width="600" height="400"></canvas>
            </div>
            
            <div class="chart-box">
                <h3>ğŸ“Š é£èƒ½åˆ©ç”¨ç³»æ•°æ›²çº¿ï¼ˆCp-Vï¼‰</h3>
                <canvas id="cpChart" width="600" height="400"></canvas>
            </div>
        </div>
        
        <div class="info-panel">
            <h3>ğŸ“‹ é£æœºå‚æ•°</h3>
            <div class="info-grid" id="infoGrid"></div>
        </div>
    </div>

    <script>
        const WIND_TURBINES = {
            'WT-3': { model: 'SWT-3kW', ratedPower: 3, cutInSpeed: 2.5, ratedSpeed: 9, cutOutSpeed: 25, diameter: 3.2, ratedRPM: 435 },
            'WT-10': { model: 'SWT-10kW', ratedPower: 10, cutInSpeed: 3.0, ratedSpeed: 10, cutOutSpeed: 25, diameter: 7.0, ratedRPM: 221 },
            'WT-50': { model: 'MWT-50kW', ratedPower: 50, cutInSpeed: 3.0, ratedSpeed: 11, cutOutSpeed: 25, diameter: 15, ratedRPM: 113 },
            'WT-1500': { model: 'GW87/1500', ratedPower: 1500, cutInSpeed: 3.0, ratedSpeed: 11, cutOutSpeed: 25, diameter: 87, ratedRPM: 19.8 },
            'WT-2500': { model: 'GW121/2500', ratedPower: 2500, cutInSpeed: 3.0, ratedSpeed: 10.5, cutOutSpeed: 25, diameter: 121, ratedRPM: 13.2 },
            'WT-3000': { model: 'MySE3.0-135', ratedPower: 3000, cutInSpeed: 3.0, ratedSpeed: 10.5, cutOutSpeed: 25, diameter: 135, ratedRPM: 12.0 },
            'WT-3600': { model: 'EN-141/3.6', ratedPower: 3600, cutInSpeed: 3.0, ratedSpeed: 10, cutOutSpeed: 25, diameter: 141, ratedRPM: 10.8 }
        };
        
        const CP_TABLE = {
            'WT-3': [0,0,0.08,0.14,0.19,0.22,0.25,0.27,0.29,0.31,0.32,0.33,0.34,0.35,0.36,0.37,0.37,0.38,0.39,0.39,0.40,0.40,0.40,0.41,0.41,0.41,0.42,0.42,0.42,0.43,0.43,0.43,0.44,0.44,0.44,0.44,0.44,0.45,0.45,0.45,0.45],
            'WT-10': [0,0,0,0.00,0.07,0.12,0.17,0.20,0.23,0.25,0.27,0.28,0.30,0.31,0.32,0.33,0.34,0.35,0.36,0.36,0.37,0.37,0.38,0.38,0.39,0.39,0.40,0.40,0.41,0.41,0.41,0.42,0.42,0.42,0.43,0.43,0.43,0.43,0.44,0.44,0.44],
            'WT-50': [0,0,0,0.00,0.07,0.12,0.17,0.20,0.23,0.25,0.27,0.29,0.30,0.31,0.32,0.33,0.34,0.35,0.36,0.36,0.37,0.37,0.38,0.38,0.39,0.39,0.40,0.40,0.41,0.41,0.41,0.42,0.42,0.42,0.43,0.43,0.43,0.43,0.44,0.44,0.44],
            'WT-1500': [0,0,0,0.00,0.07,0.12,0.17,0.20,0.23,0.25,0.27,0.29,0.30,0.31,0.32,0.33,0.34,0.35,0.36,0.36,0.37,0.37,0.38,0.38,0.39,0.39,0.40,0.40,0.41,0.41,0.41,0.42,0.42,0.42,0.43,0.43,0.43,0.43,0.44,0.44,0.44],
            'WT-2500': [0,0,0,0.00,0.07,0.12,0.17,0.20,0.23,0.25,0.27,0.29,0.30,0.31,0.32,0.33,0.34,0.35,0.36,0.36,0.37,0.37,0.38,0.38,0.39,0.39,0.40,0.40,0.41,0.41,0.41,0.42,0.42,0.42,0.43,0.43,0.43,0.43,0.44,0.44,0.44],
            'WT-3000': [0,0,0,0.00,0.07,0.12,0.17,0.20,0.23,0.25,0.27,0.29,0.30,0.31,0.32,0.33,0.34,0.35,0.36,0.36,0.37,0.37,0.38,0.38,0.39,0.39,0.40,0.40,0.41,0.41,0.41,0.42,0.42,0.42,0.43,0.43,0.43,0.43,0.44,0.44,0.44],
            'WT-3600': [0,0,0,0.00,0.07,0.12,0.17,0.20,0.23,0.25,0.27,0.29,0.30,0.31,0.32,0.33,0.34,0.35,0.36,0.36,0.37,0.37,0.38,0.38,0.39,0.39,0.40,0.40,0.41,0.41,0.41,0.42,0.42,0.42,0.43,0.43,0.43,0.43,0.44,0.44,0.44]
        };
        
        const ETA1 = 0.92, ETA2 = 0.95, ETA3 = 0.95, RHO = 1.225;
        const ETA_TOTAL = ETA1 * ETA2 * ETA3;
        
        function getCp(turbineId, windSpeed) {
            const cpArray = CP_TABLE[turbineId];
            const index = Math.floor(windSpeed * 2);
            if (index < 0) return 0;
            if (index >= cpArray.length - 1) return cpArray[cpArray.length - 1];
            const fraction = (windSpeed * 2) - index;
            return cpArray[index] + (cpArray[index + 1] - cpArray[index]) * fraction;
        }
        
        function calculatePower(turbine, windSpeed) {
            const { cutInSpeed, ratedSpeed, cutOutSpeed, ratedPower, diameter } = turbine;
            if (windSpeed <= cutInSpeed || windSpeed > cutOutSpeed) return 0;
            if (windSpeed > ratedSpeed) return ratedPower;
            const turbineId = Object.keys(WIND_TURBINES).find(key => WIND_TURBINES[key] === turbine);
            const Cp = getCp(turbineId, windSpeed);
            const power = (1/8) * Cp * ETA_TOTAL * RHO * Math.PI * Math.pow(diameter, 2) * Math.pow(windSpeed, 3) / 1000;
            return Math.min(power, ratedPower);
        }
        
        function drawPowerCurve(turbine) {
            const canvas = document.getElementById('powerChart');
            const ctx = canvas.getContext('2d');
            const width = canvas.width, height = canvas.height;
            ctx.clearRect(0, 0, width, height);
            
            const margin = { top: 40, right: 40, bottom: 60, left: 70 };
            const plotWidth = width - margin.left - margin.right;
            const plotHeight = height - margin.top - margin.bottom;
            const xMin = 0, xMax = 25, yMin = 0, yMax = turbine.ratedPower * 1.1;
            
            const toX = (x) => margin.left + (x - xMin) / (xMax - xMin) * plotWidth;
            const toY = (y) => margin.top + (yMax - y) / (yMax - yMin) * plotHeight;
            
            ctx.strokeStyle = '#e0e0e0';
            ctx.lineWidth = 0.5;
            for (let x = 0; x <= 25; x += 5) {
                ctx.beginPath();
                ctx.moveTo(toX(x), margin.top);
                ctx.lineTo(toX(x), height - margin.bottom);
                ctx.stroke();
            }
            
            ctx.strokeStyle = '#000';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(margin.left, margin.top);
            ctx.lineTo(margin.left, height - margin.bottom);
            ctx.lineTo(width - margin.right, height - margin.bottom);
            ctx.stroke();
            
            ctx.fillStyle = '#000';
            ctx.font = '12px Arial';
            ctx.textAlign = 'center';
            for (let x = 0; x <= 25; x += 5) {
                ctx.fillText(x, toX(x), height - margin.bottom + 20);
            }
            
            ctx.font = 'bold 14px Arial';
            ctx.fillText('é£é€Ÿ (m/s)', width / 2, height - 15);
            ctx.save();
            ctx.translate(20, height / 2);
            ctx.rotate(-Math.PI / 2);
            ctx.fillText('åŠŸç‡ (kW)', 0, 0);
            ctx.restore();
            
            ctx.font = 'bold 16px Microsoft YaHei';
            ctx.fillText(turbine.model + ' åŠŸç‡æ›²çº¿', width / 2, 25);
            
            ctx.strokeStyle = '#007bff';
            ctx.lineWidth = 2.5;
            ctx.beginPath();
            for (let v = 0; v <= 25; v += 0.1) {
                const p = calculatePower(turbine, v);
                const x = toX(v), y = toY(p);
                if (v === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            ctx.stroke();
        }
        
        function drawCpCurve(turbine) {
            const canvas = document.getElementById('cpChart');
            const ctx = canvas.getContext('2d');
            const width = canvas.width, height = canvas.height;
            ctx.clearRect(0, 0, width, height);
            
            const margin = { top: 40, right: 40, bottom: 60, left: 70 };
            const plotWidth = width - margin.left - margin.right;
            const plotHeight = height - margin.top - margin.bottom;
            const xMin = 0, xMax = 25, yMin = 0, yMax = 0.5;
            
            const toX = (x) => margin.left + (x - xMin) / (xMax - xMin) * plotWidth;
            const toY = (y) => margin.top + (yMax - y) / (yMax - yMin) * plotHeight;
            
            ctx.strokeStyle = '#e0e0e0';
            ctx.lineWidth = 0.5;
            for (let x = 0; x <= 25; x += 5) {
                ctx.beginPath();
                ctx.moveTo(toX(x), margin.top);
                ctx.lineTo(toX(x), height - margin.bottom);
                ctx.stroke();
            }
            
            ctx.strokeStyle = '#000';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(margin.left, margin.top);
            ctx.lineTo(margin.left, height - margin.bottom);
            ctx.lineTo(width - margin.right, height - margin.bottom);
            ctx.stroke();
            
            ctx.fillStyle = '#000';
            ctx.font = '12px Arial';
            ctx.textAlign = 'center';
            for (let x = 0; x <= 25; x += 5) {
                ctx.fillText(x, toX(x), height - margin.bottom + 20);
            }
            
            ctx.textAlign = 'right';
            for (let y = 0; y <= 0.5; y += 0.1) {
                ctx.fillText(y.toFixed(1), margin.left - 10, toY(y) + 4);
            }
            
            ctx.font = 'bold 14px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('é£é€Ÿ (m/s)', width / 2, height - 15);
            ctx.save();
            ctx.translate(20, height / 2);
            ctx.rotate(-Math.PI / 2);
            ctx.fillText('Cp', 0, 0);
            ctx.restore();
            
            ctx.font = 'bold 16px Microsoft YaHei';
            ctx.fillText(turbine.model + ' é£èƒ½åˆ©ç”¨ç³»æ•°æ›²çº¿', width / 2, 25);
            
            const turbineId = Object.keys(WIND_TURBINES).find(key => WIND_TURBINES[key] === turbine);
            ctx.strokeStyle = '#28a745';
            ctx.lineWidth = 2.5;
            ctx.beginPath();
            for (let v = 0; v <= 25; v += 0.1) {
                const cp = getCp(turbineId, v);
                const x = toX(v), y = toY(cp);
                if (v === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            ctx.stroke();
        }
        
        function updateInfo(turbine) {
            const infoGrid = document.getElementById('infoGrid');
            const area = (Math.PI * Math.pow(turbine.diameter, 2) / 4).toFixed(1);
            infoGrid.innerHTML = `
                <div class="info-item"><strong>å‹å·ï¼š</strong>${turbine.model}</div>
                <div class="info-item"><strong>é¢å®šåŠŸç‡ï¼š</strong>${turbine.ratedPower} kW</div>
                <div class="info-item"><strong>å¶è½®ç›´å¾„ï¼š</strong>${turbine.diameter} m</div>
                <div class="info-item"><strong>æ‰«é£é¢ç§¯ï¼š</strong>${area} mÂ²</div>
                <div class="info-item"><strong>åˆ‡å…¥é£é€Ÿï¼š</strong>${turbine.cutInSpeed} m/s</div>
                <div class="info-item"><strong>é¢å®šé£é€Ÿï¼š</strong>${turbine.ratedSpeed} m/s</div>
                <div class="info-item"><strong>åˆ‡å‡ºé£é€Ÿï¼š</strong>${turbine.cutOutSpeed} m/s</div>
                <div class="info-item"><strong>é¢å®šè½¬é€Ÿï¼š</strong>${turbine.ratedRPM} rpm</div>
                <div class="info-item"><strong>ä¼ åŠ¨æ•ˆç‡ï¼š</strong>${ETA1}</div>
                <div class="info-item"><strong>å‘ç”µæœºæ•ˆç‡ï¼š</strong>${ETA2}</div>
                <div class="info-item"><strong>å˜æµå™¨æ•ˆç‡ï¼š</strong>${ETA3}</div>
                <div class="info-item"><strong>æ€»æ•ˆç‡ï¼š</strong>${ETA_TOTAL.toFixed(3)}</div>
            `;
        }
        
        function updateCharts() {
            const turbineId = document.getElementById('turbineSelect').value;
            const turbine = WIND_TURBINES[turbineId];
            drawPowerCurve(turbine);
            drawCpCurve(turbine);
            updateInfo(turbine);
        }
        
        window.onload = function() {
            updateCharts();
        };
    </script>
</body>
</html>
