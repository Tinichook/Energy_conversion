# 风机功率曲线对比工具使用说明

## 一、工具文件

### 1.1 多曲线对比版本（推荐）⭐
**文件位置**: `可视化网页图/wind-power-multi-curve.html`

**功能特点**:
- ✅ 在同一张图上对比多个风机
- ✅ 支持复选框选择风机型号（可多选）
- ✅ 自动生成颜色图例
- ✅ 适合风机选型对比分析
- ✅ 左右并排显示功率曲线和Cp曲线

### 1.2 单曲线版本
**文件位置**: `可视化网页图/wind-power-curve.html`

**功能特点**:
- ✅ 绘制单个风机的功率曲线和Cp曲线
- ✅ 显示详细的风机参数信息
- ✅ 适合单个风机的详细分析

---

## 二、多曲线对比工具使用方法

### 2.1 打开工具

1. 用浏览器打开 `可视化网页图/wind-power-multi-curve.html`
2. 工具会自动加载：
   - 默认选中的风机对比图（上方）
   - 某一天的功率计算可视化（下方）

### 2.2 静态功率曲线对比

在控制面板中勾选要对比的风机型号：

| 风机型号 | 额定功率 | 叶轮直径 | 适用场景 |
|---------|---------|---------|---------|
| SWT-3kW | 3 kW | 3.2 m | 小型分布式 |
| SWT-10kW | 10 kW | 7.0 m | 小型分布式 |
| MWT-50kW | 50 kW | 15 m | 中型风场 |
| GW87/1500 | 1500 kW | 87 m | 大型风场 |
| GW121/2500 | 2500 kW | 121 m | 大型风场 |
| MySE3.0-135 | 3000 kW | 135 m | 大型风场 |
| EN-141/3.6 | 3600 kW | 141 m | 大型风场 |

**操作提示**:
- 可以同时选择多个风机进行对比
- 勾选或取消勾选后，点击"🔄 更新图表"按钮
- 建议选择2-4个风机进行对比，效果最佳
- **图例位置**：现在显示在图表上方，更加清晰

### 2.3 查看对比图表

**左侧：风机静态功率曲线对比（P-V）**
- 横轴：风速（0-25 m/s）
- 纵轴：功率（kW）
- 图例在图表上方
- 不同颜色的曲线代表不同风机
- 可以直观看出不同风机的功率输出差异

**右侧：风能利用系数曲线对比（Cp-V）**
- 横轴：风速（0-25 m/s）
- 纵轴：Cp（0-0.5）
- 图例在图表上方
- 不同颜色的曲线代表不同风机
- 可以对比不同风机的风能转换效率

### 2.4 某一天功率计算可视化 ⭐新功能

**功能说明**：
- 模拟某一天24小时的风机功率输出
- 基于真实风速变化模式
- 自动计算日发电量、平均功率等统计数据

**使用步骤**：
1. 在"选择风机"下拉菜单中选择要分析的风机型号
2. 在"选择日期"下拉菜单中选择季节（影响风速模式）
   - 1月某日（冬季）：风速较高
   - 4月某日（春季）：风速中等
   - 7月某日（夏季）：风速较低
   - 10月某日（秋季）：风速中等偏高
3. 点击"🔄 更新日功率曲线"按钮
4. 查看功率曲线和统计数据

**图表说明**：
- 横轴：时间（0-24小时）
- 纵轴：功率（kW）
- 蓝色曲线：24小时功率变化
- 蓝色圆点：每小时的功率数据点

**统计数据**：
- **日发电量**：24小时总发电量（kWh）
- **平均功率**：24小时平均功率（kW）
- **最大功率**：当天最大功率（kW）
- **平均风速**：24小时平均风速（m/s）

**图例说明**:
- 每张图上方都有颜色图例
- 图例显示每种颜色对应的风机型号
- 7种颜色循环使用

---

## 三、核心计算公式

### 3.1 功率计算公式

$$P = \frac{1}{8} C_p \eta_1 \eta_2 \eta_3 \rho \pi D^2 V^3$$

**参数说明**:
- **Cp** —— 风能利用系数（从表A.2查询）
- **η₁ = 0.92** —— 传动效率
- **η₂ = 0.95** —— 发电机效率
- **η₃ = 0.95** —— 变流器效率
- **ρ = 1.225 kg/m³** —— 空气密度
- **D** —— 叶轮直径（m）
- **V** —— 风速（m/s）

### 3.2 分段功率曲线

$$P_{WTG,STP} = \begin{cases}
0 & V \leq V_{in} \\
\frac{1}{8}C_p\eta_1\eta_2\eta_3\rho\pi D^2V^3 & V_{in} < V \leq V_r \\
P_r & V_r < V \leq V_{out} \\
0 & V > V_{out}
\end{cases}$$

**说明**:
- **区间1**: V ≤ V_in（切入风速），风机停机，P = 0
- **区间2**: V_in < V ≤ V_r（额定风速），按公式计算功率
- **区间3**: V_r < V ≤ V_out（切出风速），输出额定功率
- **区间4**: V > V_out，风机停机保护，P = 0

---

## 四、Cp数据来源

工具使用**表A.2 各风速下不同风机Cp表**的数据：

```javascript
const CP_TABLE = {
    'WT-3': [0, 0, 0.08, 0.14, 0.19, 0.22, 0.25, ...],
    'WT-10': [0, 0, 0, 0.00, 0.07, 0.12, 0.17, ...],
    'WT-50': [0, 0, 0, 0.00, 0.07, 0.12, 0.17, ...],
    // ... 其他风机
};
```

**数据特点**:
- 数据以0.5 m/s为步长
- 覆盖风速范围0-25 m/s（共41个数据点）
- 使用线性插值获取中间风速的Cp值

---

## 五、日功率计算示例

### 5.1 计算原理

**24小时发电量计算**：
$$E_{day} = \sum_{h=0}^{23} P_h \times 1 \text{ hour}$$

其中：
- $E_{day}$ —— 日发电量（kWh）
- $P_h$ —— 第h小时的功率（kW）
- 每小时功率根据当时风速计算：$P_h = f(V_h)$

### 5.2 风速模式

工具模拟了真实的日风速变化模式：
- **夜间**（0-6时）：风速较低且平稳
- **上午**（6-12时）：风速逐渐增大
- **下午**（12-18时）：风速达到峰值
- **傍晚**（18-24时）：风速逐渐减小

不同季节的基础风速：
- **冬季**（1月）：基础风速12 m/s
- **春季**（4月）：基础风速10 m/s
- **夏季**（7月）：基础风速8 m/s
- **秋季**（10月）：基础风速11 m/s

### 5.3 计算示例：GW121/2500 夏季某日

**输入条件**：
- 风机型号：GW121/2500
- 季节：7月（夏季）
- 平均风速：约8-10 m/s

**计算过程**：
1. 生成24小时风速数据
2. 对每小时风速计算功率：$P_h = \frac{1}{8}C_p\eta\rho\pi D^2V_h^3$
3. 累加24小时功率得到日发电量

**典型结果**：
- 日发电量：约30,000-40,000 kWh
- 平均功率：约1,250-1,667 kW
- 最大功率：2,500 kW（额定功率）
- 平均风速：8-10 m/s

### 5.4 不同风机对比

| 风机型号 | 夏季日发电量 | 冬季日发电量 | 年发电量估算 |
|---------|------------|------------|------------|
| SWT-3kW | 30-50 kWh | 50-70 kWh | 15-20 MWh |
| SWT-10kW | 100-150 kWh | 150-200 kWh | 50-70 MWh |
| MWT-50kW | 500-800 kWh | 800-1,200 kWh | 250-400 MWh |
| GW121/2500 | 30,000-40,000 kWh | 45,000-55,000 kWh | 15-18 GWh |

**说明**：
- 年发电量 ≈ 日发电量 × 365 × 容量因子
- 容量因子通常为0.25-0.35

---

## 六、对比分析示例

### 6.1 小型风机对比（SWT-3kW vs SWT-10kW）

**功率曲线对比**:
- SWT-3kW: 切入风速2.5 m/s，额定风速9 m/s
- SWT-10kW: 切入风速3.0 m/s，额定风速10 m/s
- 观察: SWT-3kW启动更早，但功率上限更低

**Cp曲线对比**:
- 两者Cp曲线形状相似
- 最大Cp都在0.40-0.45之间
- SWT-3kW在低风速区Cp略高

### 6.2 大型风机对比（GW121/2500 vs MySE3.0-135）

**功率曲线对比**:
- GW121/2500: 额定功率2500 kW，直径121 m
- MySE3.0-135: 额定功率3000 kW，直径135 m
- 观察: MySE3.0-135功率更大，但需要更大的叶轮

**Cp曲线对比**:
- 两者Cp曲线基本一致
- 说明风能转换效率相近
- 功率差异主要来自叶轮尺寸

---

## 七、选型建议

### 7.1 根据功率需求选型

| 应用场景 | 推荐功率范围 | 推荐型号 |
|---------|------------|---------|
| 家庭/农场 | 3-10 kW | SWT-3kW, SWT-10kW |
| 小型企业 | 50 kW | MWT-50kW |
| 风电场 | 1500-3600 kW | GW87/1500, GW121/2500, MySE3.0-135, EN-141/3.6 |

### 7.2 根据风速资源选型

**低风速区域（年平均风速 < 6 m/s）**:
- 选择切入风速低的风机
- 关注低风速区的Cp值
- 推荐: SWT-3kW（切入2.5 m/s）

**中风速区域（年平均风速 6-8 m/s）**:
- 大部分风机都适用
- 关注额定风速附近的性能
- 推荐: SWT-10kW, MWT-50kW

**高风速区域（年平均风速 > 8 m/s）**:
- 选择额定功率大的风机
- 关注高风速区的稳定性
- 推荐: 大型风机（1500 kW以上）

### 7.3 根据日发电量选型 ⭐新增

**使用日功率计算工具**：
1. 选择候选风机型号
2. 选择代表性季节（如夏季）
3. 查看日发电量统计
4. 对比不同风机的发电能力

**选型标准**：
- 日发电量满足需求
- 平均功率利用率合理（20%-40%）
- 考虑季节性变化

---

## 八、常见问题

### Q1: 为什么不同风机的Cp曲线相似？

**A**: 当前使用的是简化模型，基于表A.2的数据。实际上每个风机的Cp曲线会有细微差异，取决于：
- 叶片气动设计
- 变桨距控制策略
- 叶尖速比优化

### Q2: 如何选择对比的风机数量？

**A**: 建议：
- **2-3个风机**: 对比清晰，适合详细分析
- **4-5个风机**: 可以看出整体趋势
- **6-7个风机**: 曲线较密集，适合全局对比

### Q3: 图表显示不正常怎么办？

**A**: 检查以下几点：
1. 是否至少选择了一个风机
2. 浏览器是否支持Canvas（推荐Chrome/Edge）
3. 刷新页面重新加载
4. 检查浏览器控制台是否有错误信息

### Q5: 日功率计算的风速数据是真实的吗？

**A**: 风速数据是基于典型日风速变化模式模拟的，包含：
- 真实的日变化规律（白天风大，夜间风小）
- 季节性差异（冬季风速高，夏季风速低）
- 随机波动特征

虽然不是某个具体地点的实测数据，但能够反映风速的一般规律，适合用于：
- 教学演示
- 初步选型分析
- 发电量估算

实际项目需要使用现场实测的风速数据。

### Q6: 如何使用日功率计算进行选型？

**A**: 
1. 确定日用电需求（如50,000 kWh/天）
2. 选择候选风机，查看不同季节的日发电量
3. 考虑容量因子（通常0.25-0.35）
4. 选择日发电量能满足需求的风机
5. 考虑多台风机组合

---

## 九、技术说明

### 9.1 颜色方案

工具使用7种不同颜色区分风机：

```javascript
const COLORS = [
    '#1f77b4',  // 蓝色
    '#ff7f0e',  // 橙色
    '#2ca02c',  // 绿色
    '#d62728',  // 红色
    '#9467bd',  // 紫色
    '#8c564b',  // 棕色
    '#e377c2'   // 粉色
];
```

### 9.2 插值算法

对于非整数风速，使用线性插值：

```javascript
function getCp(turbineId, windSpeed) {
    const cpArray = CP_TABLE[turbineId];
    const index = Math.floor(windSpeed * 2);  // 0.5 m/s步长
    const fraction = (windSpeed * 2) - index;
    return cpArray[index] + (cpArray[index + 1] - cpArray[index]) * fraction;
}
```

### 9.3 功率限制

计算功率时会限制在额定功率以内：

```javascript
const power = (1/8) * Cp * ETA_TOTAL * RHO * Math.PI * Math.pow(diameter, 2) * Math.pow(windSpeed, 3) / 1000;
return Math.min(power, ratedPower);  // 不超过额定功率
```

### 9.4 日发电量计算

```javascript
function generateDailyWindSpeed(month) {
    // 根据月份设置基础风速
    const baseWindSpeed = {
        1: 12,   // 冬季
        4: 10,   // 春季
        7: 8,    // 夏季
        10: 11   // 秋季
    }[month];
    
    // 24小时风速模式
    const pattern = [10, 9, 16, 24, 15, 15, 9, 15, 20, 21, ...];
    
    // 根据季节调整
    return pattern.map(v => v * baseWindSpeed / 13);
}

// 计算日发电量
const dailyEnergy = powers.reduce((sum, p) => sum + p, 0); // kWh
```

---

## 十、文件结构

```
可视化网页图/
├── wind-power-multi-curve.html   # 多曲线对比工具（推荐）
├── wind-power-curve.html         # 单曲线工具
├── wind-power-test.html          # 测试文件
└── cp-lambda-chart.html          # Cp-λ理论曲线

MD方案/选型方案/
└── 风机功率曲线使用说明.md      # 本说明文档
```

---

## 十一、总结

### 11.1 工具优势

✅ **直观对比**: 多条曲线同时显示，一目了然  
✅ **灵活选择**: 复选框操作，随意组合  
✅ **准确计算**: 基于表A.2数据，公式标准  
✅ **美观实用**: 图例在图表上方，专业排版  
✅ **即开即用**: 无需安装，浏览器直接打开  
✅ **日功率分析**: 新增24小时功率计算可视化 ⭐  
✅ **统计数据**: 自动计算日发电量、平均功率等  

### 11.2 适用场景

- 📊 **课程设计报告**: 风机选型对比分析
- 🔍 **方案比较**: 不同功率等级风机对比
- 📈 **性能分析**: 功率曲线和Cp曲线研究
- 🎓 **教学演示**: 风机特性可视化展示
- ⚡ **发电量估算**: 日发电量和年发电量计算 ⭐

### 11.3 使用建议

1. **选型对比**: 选择同功率等级的2-3个风机对比
2. **性能分析**: 关注额定风速附近的曲线形状
3. **报告撰写**: 截图保存对比图表
4. **数据验证**: 检查额定功率点是否正确
5. **发电量分析**: 使用日功率计算工具估算发电能力 ⭐
6. **季节对比**: 对比不同季节的发电量差异 ⭐

---

**最后更新**: 2025年1月  
**工具版本**: v2.0（新增日功率计算功能）  
**作者**: 能源转化原理课程设计团队
