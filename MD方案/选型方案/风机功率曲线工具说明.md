# 风机功率曲线分析工具使用说明

## 一、工具简介

`energy-system/wind-power-curve.html` 是一个交互式风机性能分析工具，可以：

✅ 绘制风机静态功率曲线（P-V）  
✅ 绘制风能利用系数曲线（Cp-V）  
✅ 显示详细的风机参数  
✅ 基于你提供的Cp表格数据计算  

## 二、使用方法

### 2.1 打开工具

1. 用浏览器打开 `energy-system/wind-power-curve.html`
2. 工具会自动加载默认风机（GW121/2500）

### 2.2 选择风机

在下拉菜单中选择风机型号：
- SWT-3kW（小型风机）
- SWT-10kW（小型风机）
- MWT-50kW（中型风机）
- GW87/1500（大型风机）
- **GW121/2500**（大型风机，默认）
- MySE3.0-135（大型风机）
- EN-141/3.6（大型风机）

### 2.3 查看图表

**左侧：风机静态功率曲线**
- 横轴：风速（0-25 m/s）
- 纵轴：功率（kW）
- 显示完整的功率曲线

**右侧：风能利用系数曲线**
- 横轴：风速（0-25 m/s）
- 纵轴：Cp（0-0.5）
- 显示Cp随风速的变化

**下方：风机参数信息**
- 基本参数（型号、功率、直径等）
- 风速参数（切入、额定、切出）
- 效率参数（传动、发电机、变流器）

## 三、核心计算公式

### 3.1 功率计算公式

$$P = \frac{1}{8} C_p \eta_1 \eta_2 \eta_3 \rho \pi D^2 V^3$$

**参数说明：**
- **Cp** —— 风能利用系数（从表格查询）
- **η₁ = 0.92** —— 传动效率
- **η₂ = 0.95** —— 发电机效率
- **η₃ = 0.95** —— 变流器效率
- **ρ = 1.225 kg/m³** —— 空气密度
- **D** —— 叶轮直径（m）
- **V** —— 风速（m/s）

### 3.2 分段功率曲线

$$P_{WTG,STP} = \begin{cases}
0 & V \leq V_{in} \\
\frac{1}{8}C_p\eta_1\eta_2\eta_3\rho\pi D^2V^3 & V_{in} < V \leq V_r \\
P_r & V_r < V \leq V_{out} \\
0 & V > V_{out}
\end{cases}$$

**说明：**
- **区间1**：V ≤ V_in（切入风速），风机停机，P = 0
- **区间2**：V_in < V ≤ V_r（额定风速），按公式计算功率
- **区间3**：V_r < V ≤ V_out（切出风速），输出额定功率
- **区间4**：V > V_out，风机停机保护，P = 0

## 四、Cp数据来源

工具使用你提供的**表A.2 各风速下不同风机Cp表**：

```javascript
const CP_TABLE = {
    'WT-3': [0, 0, 0.08, 0.14, 0.19, 0.22, ...],
    'WT-10': [0, 0, 0, 0.00, 0.07, 0.12, ...],
    // ... 其他风机
};
```

**特点：**
- 数据以0.5 m/s为步长
- 覆盖风速范围0-25 m/s
- 使用线性插值获取中间值

## 五、计算示例

### 示例：GW121/2500 在 V=8 m/s 时的功率

**步骤1：查找Cp**
```
V = 8 m/s
index = 8 × 2 = 16
CP_TABLE['WT-2500'][16] = 0.34
```

**步骤2：计算功率**
```
D = 121 m
η_total = 0.92 × 0.95 × 0.95 = 0.831
ρ = 1.225 kg/m³

P = (1/8) × 0.34 × 0.831 × 1.225 × π × 121² × 8³
P = 0.125 × 0.34 × 0.831 × 1.225 × 45,966 × 512
P ≈ 350 kW
```

**步骤3：判断状态**
```
V_in = 3.0 m/s < 8 m/s < V_r = 10.5 m/s
状态：变速运行
```

## 六、功率曲线特征

### 6.1 典型形状

```
功率(kW)
   Pr |                    _______________
      |                   /
      |                  /
      |                 /
      |               /
      |             /
    0 |___________/________________________
      0   Vin    Vr              Vout    风速(m/s)
```

### 6.2 三个关键点

1. **V_in（切入风速）**
   - 风机开始发电的最低风速
   - 小型风机：2.5 m/s
   - 大型风机：3.0 m/s

2. **V_r（额定风速）**
   - 达到额定功率的风速
   - 范围：9-11 m/s

3. **V_out（切出风速）**
   - 停机保护的风速
   - 通常：25 m/s

## 七、Cp曲线特征

### 7.1 典型形状

```
Cp
0.45|        ___
    |       /   \___
0.30|      /        \___
    |     /             \___
0.15|    /                  \___
    |   /                       \___
  0 |__/____________________________\___
    0  Vin  Vopt  Vr              Vout  风速(m/s)
```

### 7.2 特点

- **低风速区**（V < 5 m/s）：Cp较低（0.1-0.2）
- **最佳区**（V = 7-12 m/s）：Cp最大（0.35-0.45）
- **高风速区**（V > 15 m/s）：Cp下降（变桨距控制）

## 八、技术说明

### 8.1 为什么是 (1/8)？

功率公式推导：

$$P = \frac{1}{2} \rho A V^3 C_p \eta$$

其中扫风面积：

$$A = \frac{\pi D^2}{4}$$

代入得：

$$P = \frac{1}{2} \rho \frac{\pi D^2}{4} V^3 C_p \eta = \frac{1}{8} \rho \pi D^2 V^3 C_p \eta$$

### 8.2 总效率计算

$$\eta_{total} = \eta_1 \times \eta_2 \times \eta_3 = 0.92 \times 0.95 \times 0.95 = 0.831$$

**说明：**
- η₁：传动系统效率（齿轮箱等）
- η₂：发电机效率
- η₃：变流器效率（AC-DC-AC转换）

## 九、常见问题

### Q1：为什么不同风机的Cp曲线相似？

A：当前使用的是简化模型，假设所有风机的Cp-V关系相似。实际上每个风机的Cp曲线略有差异，取决于叶片设计、控制策略等。

### Q2：如何验证计算结果？

A：可以检查以下几点：
- 额定风速下功率应接近额定功率
- Cp最大值应在0.40-0.45之间
- 功率曲线应呈现典型的S形

### Q3：工具支持哪些浏览器？

A：支持所有现代浏览器：
- Chrome / Edge（推荐）
- Firefox
- Safari

## 十、文件结构

```
energy-system/
├── wind-power-curve.html     # 主工具文件
└── wind-power-test.html      # 测试文件

MD方案/
└── 风机功率曲线工具说明.md   # 本说明文档
```

## 十一、总结

这个工具实现了：

✅ 基于你提供的Cp表格数据  
✅ 使用标准功率计算公式  
✅ 绘制两种关键曲线（功率、Cp）  
✅ 提供详细的参数信息  
✅ 支持7种风机型号切换  
✅ 无语法错误，可直接使用  

**适用场景：**
- 课程设计报告
- 风机性能分析
- 选型方案比较
- 功率曲线验证
